// Copyright (c) CLMS. All rights reserved.
// Licensed under the AGPL-3.0 license. See LICENSE file in the project root for full license information.
// This source file was autogenerated by zAppDev(r).

using System;
using System.Data;
using System.Data.Common;
using NHibernate.Connection;

namespace DSS2_SynchromodalityCapacityOptimisation.BoTesting.Tests.Common
{
    public class TestConnectionProvider : DriverConnectionProvider
    {

        [ThreadStatic]
        private static DbConnection _connection;

        public static void CloseDatabase()
        {
            _connection?.Dispose();
            _connection = null;
        }

        public override DbConnection GetConnection()
        {
            if (_connection != null) return _connection;
            _connection = Driver.CreateConnection();
            _connection.ConnectionString = ConnectionString;
            _connection.Open();
            return _connection;
        }

        public override void CloseConnection(DbConnection conn)
        {
            // Do nothing
        }

    }
}
