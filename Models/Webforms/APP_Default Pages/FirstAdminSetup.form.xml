/*
Copyright (c) CLMS. All rights reserved.
Licensed under the AGPL-3.0 license. See LICENSE file in the project root for full license information.*/

{"Actions":[{"Code":"function void Execute() \n{\n    if Domain.ApplicationUser.GetAll().Any(x => x.Roles.Any(r => r.Name == \"Administrator\"))\n    {\n        ShowMessage(\n        \tLocalResources.RES_CUSTOM_NoAccess,\n        \tAppLib.MessageType.Error, \n        \tFormModels.HomePage.Controller.Render.GetLink()\n    \t);\n        DebugLib.Logger.WriteWarnLine(\"Admin user already exists\");\n        return;   \n    }\n\t\n\tModel.ApplicationUser = AppLib.Session.GetCurrentUser();\n\tModel.Title = LocalResources.RES_PAGETITLE_Render;\n}","Name":"Render","Permissions":[],"AllowAnonymous":false,"AllowAllAuthenticatedUsers":true,"AccessLog":false,"IsEntryPoint":true,"IsDefault":false,"CausesValidation":false,"DontPostViewModel":false,"AllGroups":true,"Groups":[]},{"Code":"function void Execute() {\n\tDomain.ApplicationRole role = \n\t\tDomain.ApplicationRole.Find(r => r.Name == \"Administrator\").First();\n\t\n\tif role == null\n\t{\n\t\tthrow (LocalResources.RES_CUSTOM_NoAdminRoleFound);   \n\t}\n\t\n\tif Model.ApplicationUser.IsInRole(\"Administrator\")\n\t{\n\t\tthrow (LocalResources.RES_CUSTOM_AlreadyAdmin);   \n\t}\n\t\n\tModel.ApplicationUser.Roles.Add(role);\n\tModel.ApplicationUser.Save();\n\tFormModels.HomePage.Controller.Render.Execute();\n}","Name":"Save","Permissions":[],"AllowAnonymous":false,"AllowAllAuthenticatedUsers":true,"AccessLog":false,"IsEntryPoint":false,"IsDefault":false,"CausesValidation":false,"DontPostViewModel":false,"AllGroups":true,"Groups":[]}],"EventListeners":[],"Resources":[{"Type":"S","Key":"RES_Body_ConfirmationMessage","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_TOOLTIP_Body","Languages":[{"Name":"en-us"},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_FieldSet_ConfirmationMessage","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_TOOLTIP_FieldSet","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_FieldSetHeader_ConfirmationMessage","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_TOOLTIP_FieldSetHeader","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_LABEL_Label1","Languages":[{"Name":"en-us","Value":"First Administrator Setup"},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_Label1_ConfirmationMessage","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_TOOLTIP_Label1","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_FieldSetContainer_ConfirmationMessage","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_TOOLTIP_FieldSetContainer","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_LABEL_Label2","Languages":[{"Name":"en-us","Value":"By clicking the OK button, \"Administrator\" Role will be assigned to you."},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_Label2_ConfirmationMessage","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_TOOLTIP_Label2","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_LineBreak_ConfirmationMessage","Languages":[{"Name":"en-us","Value":"Are you sure you want to execute this action?"}]},{"Type":"S","Key":"RES_TOOLTIP_LineBreak","Languages":[{"Name":"en-us"}]},{"Type":"S","Key":"RES_LABEL_Label","Languages":[{"Name":"en-us","Value":"This functionality cannot be used again."}]},{"Type":"S","Key":"RES_Label_ConfirmationMessage","Languages":[{"Name":"en-us","Value":"Are you sure you want to execute this action?"}]},{"Type":"S","Key":"RES_TOOLTIP_Label","Languages":[{"Name":"en-us"}]},{"Type":"S","Key":"RES_FieldSetFooter_ConfirmationMessage","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_TOOLTIP_FieldSetFooter","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_Button2_ConfirmationMessage","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_LABEL_Label4","Languages":[{"Name":"en-us","Value":"Exit"},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_Label4_ConfirmationMessage","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_TOOLTIP_Label4","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_Button1_ConfirmationMessage","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_LABEL_Label3","Languages":[{"Name":"en-us","Value":"OK"},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_Label3_ConfirmationMessage","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_TOOLTIP_Label3","Languages":[{"Name":"en-us","Value":""},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_PAGETITLE_Render","Languages":[{"Name":"en-us","Value":"Render"},{"Name":"el","Value":""}]},{"Type":"S","Key":"RES_PAGETITLE_Save","Languages":[{"Name":"en-us","Value":"Save"},{"Name":"el","Value":""}]},{"Type":"C","Key":"RES_CUSTOM_NoAccess","Languages":[{"Name":"en-us","Value":"An Administrator user already exists"},{"Name":"el","Value":""}]},{"Type":"C","Key":"RES_CUSTOM_NoAdminRoleFound","Languages":[{"Name":"en-us","Value":"Role \"Administrator\" not found in the DataBase !"},{"Name":"el","Value":""}]},{"Type":"C","Key":"RES_CUSTOM_AlreadyAdmin","Languages":[{"Name":"en-us","Value":"Role \"Administrator\" is already assigned to you"},{"Name":"el","Value":""}]}],"ViewModel":[{"Type":1,"Name":"ApplicationUser","Datatype":"ApplicationUser","Children":[{"Type":0,"Name":"AccessFailedCount","Datatype":"int","Children":[],"IsRequired":false,"Hidden":true,"Readonly":false,"Precision":2,"Length":"100","Scale":2,"IsCollection":false,"IsPk":false},{"Type":0,"Name":"Email","Datatype":"string","Children":[],"IsRequired":false,"Hidden":true,"Readonly":false,"Precision":8,"Length":"255","Scale":2,"IsCollection":false,"IsPk":false},{"Type":0,"Name":"EmailConfirmed","Datatype":"bool","Children":[],"IsRequired":false,"Hidden":true,"Readonly":false,"Precision":2,"Length":"100","Scale":2,"IsCollection":false,"IsPk":false},{"Type":0,"Name":"LockoutEnabled","Datatype":"bool","Children":[],"IsRequired":false,"Hidden":true,"Readonly":false,"Precision":2,"Length":"100","Scale":2,"IsCollection":false,"IsPk":false},{"Type":0,"Name":"LockoutEndDate","Datatype":"DateTime","Children":[],"IsRequired":false,"Hidden":true,"Readonly":false,"Precision":2,"Length":"100","Scale":2,"IsCollection":false,"IsPk":false},{"Type":0,"Name":"Name","Datatype":"string","Children":[],"IsRequired":false,"Hidden":true,"Readonly":false,"Precision":2,"Length":"256","Scale":2,"IsCollection":false,"IsPk":false},{"Type":0,"Name":"PasswordHash","Datatype":"string","Children":[],"IsRequired":false,"Hidden":true,"Readonly":false,"Precision":2,"Length":"2147483647","Scale":2,"IsCollection":false,"IsPk":false},{"Type":0,"Name":"PhoneNumber","Datatype":"string","Children":[],"IsRequired":false,"Hidden":true,"Readonly":false,"Precision":8,"Length":"255","Scale":2,"IsCollection":false,"IsPk":false},{"Type":0,"Name":"PhoneNumberConfirmed","Datatype":"bool","Children":[],"IsRequired":false,"Hidden":true,"Readonly":false,"Precision":2,"Length":"100","Scale":2,"IsCollection":false,"IsPk":false},{"Type":0,"Name":"SecurityStamp","Datatype":"string","Children":[],"IsRequired":false,"Hidden":true,"Readonly":false,"Precision":2,"Length":"2147483647","Scale":2,"IsCollection":false,"IsPk":false},{"Type":0,"Name":"TwoFactorEnabled","Datatype":"bool","Children":[],"IsRequired":false,"Hidden":true,"Readonly":false,"Precision":2,"Length":"100","Scale":2,"IsCollection":false,"IsPk":false},{"Type":0,"Name":"UserName","Datatype":"string","Children":[],"IsRequired":true,"Hidden":false,"Readonly":false,"Precision":8,"Length":"256","Scale":2,"IsCollection":false,"IsPk":true},{"Type":1,"Name":"Roles","Datatype":"ApplicationRole","Children":[{"Type":0,"Name":"Description","Datatype":"string","Children":[],"IsRequired":false,"Hidden":true,"Readonly":false,"Precision":2,"Length":"1000","Scale":2,"IsCollection":false,"IsPk":false},{"Type":0,"Name":"Id","Datatype":"int","Children":[],"IsRequired":true,"Hidden":false,"Readonly":false,"Precision":2,"Length":"100","Scale":2,"IsCollection":false,"IsPk":true},{"Type":0,"Name":"IsCustom","Datatype":"bool","Children":[],"IsRequired":false,"Hidden":true,"Readonly":false,"Precision":8,"Length":"100","Scale":2,"IsCollection":false,"IsPk":false},{"Type":0,"Name":"Name","Datatype":"string","Children":[],"IsRequired":true,"Hidden":false,"Readonly":true,"Precision":2,"Length":"255","Scale":2,"IsCollection":false,"IsPk":false}],"IsRequired":false,"Hidden":false,"Readonly":false,"Precision":0,"Scale":0,"IsCollection":true,"IsPk":false}],"IsRequired":false,"Hidden":false,"Readonly":false,"Precision":0,"Scale":0,"IsCollection":false,"IsPk":false}],"DataSets":[],"ConditionalFormattings":[],"DataValidations":[],"CalculatedExpressions":[],"Controls":[{"$type":"CLMS.AppDev.DomainModel.Models.BodyControl, CLMS.AppDev.DomainModel","Name":"Body","CssStyle":"","CssClass":"","DoesNotMakeFormDirty":false,"FontSizeRole":0,"ElementSizeRole":0,"ColorRole":0,"FilterOperator":0,"RowOperator":0,"Ovewrite":false,"ApplyOnBlur":false,"HiddenInMobileView":false,"Ignored":false,"Controls":[{"$type":"CLMS.AppDev.DomainModel.Models.FieldSetControl, CLMS.AppDev.DomainModel","Header":{"Name":"FieldSetHeader","CssStyle":"","CssClass":"blue-white","Tooltip":"","Datasource":"","DoesNotMakeFormDirty":false,"FontSizeRole":0,"ElementSizeRole":0,"ColorRole":0,"FilterOperator":0,"RowOperator":0,"Ovewrite":false,"ApplyOnBlur":false,"HiddenInMobileView":false,"Ignored":false,"Controls":[{"$type":"CLMS.AppDev.DomainModel.Models.LabelControl, CLMS.AppDev.DomainModel","Value":"First Administrator Setup","RenderAsHtml":false,"Name":"Label1","CssStyle":"","CssClass":"","Tooltip":"","Datasource":"","DoesNotMakeFormDirty":false,"FontSizeRole":0,"ElementSizeRole":0,"ColorRole":0,"FilterOperator":0,"RowOperator":0,"Ovewrite":false,"ApplyOnBlur":false,"HiddenInMobileView":false,"Ignored":false,"Controls":[]}]},"Container":{"Name":"FieldSetContainer","CssStyle":"","CssClass":"","Tooltip":"","Datasource":"","DoesNotMakeFormDirty":false,"FontSizeRole":0,"ElementSizeRole":0,"ColorRole":0,"FilterOperator":0,"RowOperator":0,"Ovewrite":false,"ApplyOnBlur":false,"HiddenInMobileView":false,"Ignored":false,"Controls":[{"$type":"CLMS.AppDev.DomainModel.Models.LabelControl, CLMS.AppDev.DomainModel","Value":"By clicking the OK button, \"Administrator\" Role will be assigned to you.","RenderAsHtml":false,"Name":"Label2","CssStyle":"","CssClass":"","Tooltip":"","Datasource":"","DoesNotMakeFormDirty":false,"FontSizeRole":0,"ElementSizeRole":0,"ColorRole":0,"FilterOperator":0,"RowOperator":0,"Ovewrite":false,"ApplyOnBlur":false,"HiddenInMobileView":false,"Ignored":false,"Controls":[]},{"$type":"CLMS.AppDev.DomainModel.Models.HtmlFormControl, CLMS.AppDev.DomainModel","TagName":"BR","Name":"LineBreak","CssStyle":"","CssClass":"","DoesNotMakeFormDirty":false,"FontSizeRole":0,"ElementSizeRole":0,"ColorRole":0,"FilterOperator":7,"RowOperator":1,"Ovewrite":true,"ApplyOnBlur":true,"HiddenInMobileView":false,"Ignored":false,"Controls":[]},{"$type":"CLMS.AppDev.DomainModel.Models.LabelControl, CLMS.AppDev.DomainModel","Value":"This functionality cannot be used again.","RenderAsHtml":false,"Name":"Label","CssStyle":"","CssClass":"","DoesNotMakeFormDirty":false,"FontSizeRole":0,"ElementSizeRole":0,"ColorRole":0,"FilterOperator":7,"RowOperator":1,"Ovewrite":true,"ApplyOnBlur":true,"HiddenInMobileView":false,"Ignored":false,"Controls":[]}]},"Footer":{"Name":"FieldSetFooter","CssStyle":"","CssClass":"","Tooltip":"","Datasource":"","DoesNotMakeFormDirty":false,"FontSizeRole":0,"ElementSizeRole":0,"ColorRole":0,"FilterOperator":0,"RowOperator":0,"Ovewrite":false,"ApplyOnBlur":false,"HiddenInMobileView":false,"Ignored":false,"Controls":[{"$type":"CLMS.AppDev.DomainModel.Models.ButtonControl, CLMS.AppDev.DomainModel","ActionType":1,"AppliesFiltersOfList":"","ClearsFiltersOfList":"","ValidationGroups":[],"ImageUrl":"","Type":0,"Labels":[{"$type":"CLMS.AppDev.DomainModel.Models.LabelControl, CLMS.AppDev.DomainModel","Value":"Exit","RenderAsHtml":false,"Name":"Label4","CssStyle":"","CssClass":"","Tooltip":"","Datasource":"","DoesNotMakeFormDirty":false,"FontSizeRole":0,"ElementSizeRole":0,"ColorRole":0,"FilterOperator":0,"RowOperator":0,"Ovewrite":false,"ApplyOnBlur":false,"HiddenInMobileView":false,"Ignored":false,"Controls":[]}],"ShowConfirmation":false,"IsDefaultButton":false,"IsEscapeButton":false,"Name":"Button2","CssStyle":"","CssClass":"btn-normal","Tooltip":"","Datasource":"","DoesNotMakeFormDirty":false,"FontSizeRole":0,"ElementSizeRole":0,"ColorRole":0,"FilterOperator":0,"RowOperator":0,"Ovewrite":false,"ApplyOnBlur":false,"HiddenInMobileView":false,"Ignored":false,"OnClick":{"Type":1,"ControllerType":0,"OnUnauthorized":"HIDE","TargetFrame":"_self","ModalSize":"POPUP","Parameters":[],"Permissions":[],"IsPublic":false,"NoPermissionsRequired":false,"AllowAnonymous":false,"AllowAllAuthenticatedUsers":false,"EnableAccessLog":false,"ShowConfirmation":false,"IsDefaultButton":false,"IsEscapeButton":false,"DisableControlDuringExecution":false}},{"$type":"CLMS.AppDev.DomainModel.Models.ButtonControl, CLMS.AppDev.DomainModel","ActionType":3,"AppliesFiltersOfList":"","ClearsFiltersOfList":"","ValidationGroups":[],"ImageUrl":"","Type":0,"ControllerAction":{"Type":2,"Action":"Save","Controller":"this","ControllerType":0,"OnUnauthorized":"HIDE","TargetFrame":"_self","ModalSize":"","Parameters":[],"OnCloseModalDialogAction":"","Permissions":[],"IsPublic":false,"NoPermissionsRequired":false,"AllowAnonymous":false,"AllowAllAuthenticatedUsers":false,"EnableAccessLog":false,"ShowConfirmation":false,"IsDefaultButton":false,"IsEscapeButton":false,"DisableControlDuringExecution":false},"Labels":[{"$type":"CLMS.AppDev.DomainModel.Models.LabelControl, CLMS.AppDev.DomainModel","Value":"OK","RenderAsHtml":false,"Name":"Label3","CssStyle":"","CssClass":"","Tooltip":"","Datasource":"","DoesNotMakeFormDirty":false,"FontSizeRole":0,"ElementSizeRole":0,"ColorRole":0,"FilterOperator":0,"RowOperator":0,"Ovewrite":false,"ApplyOnBlur":false,"HiddenInMobileView":false,"Ignored":false,"Controls":[]}],"ShowConfirmation":false,"IsDefaultButton":false,"IsEscapeButton":false,"Name":"Button1","CssStyle":"float: right;\n","CssClass":"btn-normal","Tooltip":"","Datasource":"","DoesNotMakeFormDirty":false,"FontSizeRole":0,"ElementSizeRole":0,"ColorRole":0,"FilterOperator":0,"RowOperator":0,"Ovewrite":false,"ApplyOnBlur":false,"HiddenInMobileView":false,"Ignored":false,"OnClick":{"Type":2,"Action":"Save","Controller":"this","ControllerType":0,"OnUnauthorized":"HIDE","TargetFrame":"_self","ModalSize":"","Parameters":[],"OnCloseModalDialogAction":"","Permissions":[],"IsPublic":false,"NoPermissionsRequired":false,"AllowAnonymous":false,"AllowAllAuthenticatedUsers":false,"EnableAccessLog":false,"ShowConfirmation":false,"IsDefaultButton":true,"IsEscapeButton":false,"DisableControlDuringExecution":false}}]},"HasHeader":true,"HasFooter":true,"Collapsible":false,"IsCollapsed":false,"ToggleStateOnHeaderClick":false,"Name":"FieldSet","CssStyle":"","CssClass":"","Tooltip":"","Datasource":"","DoesNotMakeFormDirty":false,"FontSizeRole":0,"ElementSizeRole":0,"ColorRole":0,"FilterOperator":0,"RowOperator":0,"Ovewrite":false,"ApplyOnBlur":false,"HiddenInMobileView":false,"Ignored":false}]}],"ShowWarningWhenLeavingPage":true,"IsMasterPage":false,"IsPartial":false,"IsExportable":false,"DisableValidationPanel":false,"MasterPage":"MasterPage","Imports":[],"MaxViewModelLevel":0,"ModelName":"FirstAdminSetup","Version":"0.3.15"}